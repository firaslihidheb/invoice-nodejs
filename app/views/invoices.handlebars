<script type="text/javascript" src="static/javascripts/vendor/moment.min.js"></script>
<script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
<nav class="navbar navbar-default">
    <a href="#" class="navbar-left"><img class="custom_brand_logo" src="/static/images/logo.png" alt="logo"
            style="float: left;" height="50"></a>
    <div class="container-fluid">
        <ul class="nav nav-tabs navbar-nav navbar-right">
            <li class=""><a href="/products"><i class="fa fa-th-list" aria-hidden="true"></i> Contrats</a></li>
            <li class="active"><a href="#"><i class="fa fa-file-text-o" aria-hidden="true"></i> Factures</a></li>
            <li class=""><a href="/customers"><i class="fa fa-users" aria-hidden="true"></i> Clients</a></li>
            <li class=""><a href="/collaborateurs"><i class="fa fa-users" aria-hidden="true"></i> Collaborateurs</a>
            </li>
            <li class="logout-root"><a href="#logout"><i class="fa fa-sign-out" aria-hidden="true"></i>Log Out</a></li>
        </ul>
    </div>
</nav>
<div class="container">
    <div class="col-md-6 ">
        <h2>Factures</h2>
    </div>
    <div class="col-md-6 ">
        <div class="add_more_button add_new_invoice" style="width: 124px"><i class="fa fa-plus" aria-hidden="true"></i>
            ajouter une nouveau facture
        </div>
        <div class="remove_more_button remove_new_invoice" style="width: 124px; display: none"><i class="fa fa-times"
                aria-hidden="true"></i>
            Annuler
        </div>
    </div>
</div>
<div class="container">
    <form class="add-invoice-form" style="display: none">
        <hr>
        <h4 class="color-green">nouveau facture</h4>

        <div class="col-md-12 m-t-15">
            <hr>
            <h4>Contrats</h4>
        </div>
        <div class='product_parent'>
            <div class="row 1 m-t-15">
                <div class="col-md-6 ">
                    <label>Nom</label>
                    <select class="form-control product 1" id="product_id" name="product_id" required>
                    </select>
                </div>
                <div class="col-md-1 ">
                    <label>Quantity</label>
                    <input type="number" step="1" min="1" max="9999" class="form-control quantity 1" placeholder="Qty"
                        name="quantity" required>
                </div>

            </div>
        </div>
        <div class="col-md-12 m-t-15">
            <hr>
            <h4>Mois</h4>
            <label>choisir le mois de facturation:</label>
            <select class="form-control" id="billingMonth" name="billingMonth"></select>
        </div>

        <hr>
     <form id="uploadForm" enctype="multipart/form-data">
    <table class="table">
        <tr>
            <th>Select File</th>
            <td>
                <input type="file" id="pdf_file" name="pdf_file" />
            </td>
            <td>
                <input type="button" id="submitBtn" value="Submit" />
            </td>
        </tr>
    </table>
</form>

<div id="result"></div>

        <div class="invoice_alert_div alert" style="display: none"></div>
        <button type="submit" class="btn submit-btn m-t-15">Submit</button>
    </form>

    <hr>
    <table id="invoices-table" class="display:none" cellspacing="0" width="100%">
        <thead>
            <tr>
             
            </tr>
        </thead>
    </table>
    <div class="no_data_found"></div>
</div>
<script type="text/javascript" src="static/javascripts/invoice.js?v=0.0.2"></script>
<script type="text/javascript" src="static/javascripts/logout.js"></script>
<script>
   $(document).ready(function () {
    $("#pdf_file").on("change", function () {
        // Check if a file is selected
        var fileInput = $(this);
        var file = fileInput[0].files[0];

        if (!file) {
            $("#result").html("Please select a PDF file to upload");
            return;
        }

        var formData = new FormData();
        formData.append("pdf_file", file);

        console.log(formData);

        $.ajax({
            url: "http://localhost:3000/uploadpdf",
            type: "POST",
            data: formData,
            processData: false,
            contentType: false,
            success: function (response) {
                // Handle the response, e.g., display a success message
                $("#result").html("File uploaded successfully!");
            },
            error: function (error) {
                // Handle errors, e.g., display an error message
                $("#result").html("Error uploading file: " + error.responseText);
            }
        });
    });
});
</script>
